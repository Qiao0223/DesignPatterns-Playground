# 观察者模式

观察者模式是一种行为型设计模式，它定义了对象之间的一对多依赖关系。具体来说，当一个对象的状态发生变化时，所有依赖于它的对象都会自动得到通知并更新。这种模式的主要目的是实现 解耦，使得被观察者（主题对象）和观察者（依赖对象）之间能够独立变化。在观察者模式中，被观察者（Subject/Observable） 是状态变化的源，它维护一系列的 观察者（Observer），当被观察者的状态发生变化时，它会通知所有注册的观察者，观察者在收到通知后根据变化更新自己的状态。

## **适用场景**

观察者模式适用于以下场景：

1. **一个对象的变化会影响其他对象**：例如，新闻发布者发布新闻，所有订阅者（读者）都可以收到更新。
2. **事件驱动系统**：例如，按钮点击、用户输入等事件会触发观察者的响应。
3. **状态变化通知**：在某些系统中，当某个对象的状态发生变化时，需要通知多个对象（例如股票市场变化时，多个投资者需要收到通知）。

## **结构**

观察者模式通常包括以下几个组成部分：

1. **Subject（主题/被观察者）**：定义了注册、注销观察者的方法，并在自身状态变化时通知所有观察者。
2. **Observer（观察者）**：定义了一个更新接口，以便在主题发生变化时接收通知。
3. **ConcreteSubject（具体主题）**：实现主题接口，维护主题的状态，并向所有注册的观察者发送通知。
4. **ConcreteObserver（具体观察者）**：实现观察者接口，响应主题的状态变化，进行状态更新。

## **优缺点**

### **优点**

1. **松耦合**：被观察者与观察者之间没有强耦合关系。观察者只需要知道主题接口即可，无需关心具体实现。增加或删除观察者不会影响到被观察者。
2. **易于扩展**：新增观察者不需要修改现有代码，只需扩展新的观察者类即可。
3. **灵活性**：多个观察者可以并行工作，各自执行独立的任务。

### **缺点**

1. **依赖性**：如果观察者过多，可能会导致通知过于频繁，造成性能问题。
2. **可能出现不必要的通知**：观察者模式的设计使得被观察者每次状态变化时都要通知所有观察者，如果某些观察者不需要更新，这可能会造成无意义的开销。
3. **难以控制通知的顺序**：多个观察者可能会并行更新，如何保证更新的顺序是一个需要考虑的问题。

